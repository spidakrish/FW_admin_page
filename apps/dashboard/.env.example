# =============================================================================
# FW Admin Dashboard - Environment Configuration
# =============================================================================
# Copy this file to .env.local and configure for your environment.
# Variables prefixed with NEXT_PUBLIC_ are exposed to the browser.
# =============================================================================

# -----------------------------------------------------------------------------
# Service URLs [REQUIRED in production]
# -----------------------------------------------------------------------------

# FW Document Analysis tool URL
# Development default: http://localhost:5173
NEXT_PUBLIC_FW_ANALYSIS_URL=http://localhost:5173

# BackPro AI Platform URL
# Development default: http://localhost:3001
NEXT_PUBLIC_BACKPRO_URL=http://localhost:3001

# API Gateway URL
# Development default: http://localhost:8787
NEXT_PUBLIC_API_GATEWAY_URL=http://localhost:8787

# -----------------------------------------------------------------------------
# API Authentication
# -----------------------------------------------------------------------------

# API key for gateway authentication
# IMPORTANT: Required in production
# Generate with: openssl rand -hex 32
NEXT_PUBLIC_API_KEY=

# -----------------------------------------------------------------------------
# NextAuth.js Authentication
# -----------------------------------------------------------------------------

# JWT signing secret (REQUIRED)
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=

# Application base URL
NEXTAUTH_URL=http://localhost:3000

# User credentials — format: email:bcrypt_hash:role (comma-separated)
# Generate hashes with: node scripts/hash-password.mjs <password>
# Example: admin@fw.dev:$2a$10$...:admin,viewer@fw.dev:$2a$10$...:viewer
AUTH_USERS=

# -----------------------------------------------------------------------------
# Upstash Redis (User Management)
# -----------------------------------------------------------------------------

# Sign up at https://upstash.com (free tier: 10K requests/day)
# If not set, falls back to AUTH_USERS env var (read-only)
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# -----------------------------------------------------------------------------
# Azure Container App Management (Document Processor start/stop)
# -----------------------------------------------------------------------------
#
# Authentication strategies (in priority order):
#
# 1. MANAGED IDENTITY (recommended for Azure SWA production):
#    Enable System Assigned Identity in Azure Portal:
#      Static Web App → Settings → Identity → System assigned → On
#    Then grant Contributor role on the Container App:
#      az role assignment create --assignee <SWA_PRINCIPAL_ID> \
#        --role Contributor \
#        --scope /subscriptions/<SUB_ID>/resourceGroups/<RG>/providers/Microsoft.App/containerApps/<APP_NAME>
#    No env vars needed — IDENTITY_ENDPOINT and IDENTITY_HEADER are auto-injected.
#
# 2. SERVICE PRINCIPAL (for non-Azure hosting like Vercel):
#    az ad sp create-for-rbac --name "fw-admin-dashboard" \
#      --role Contributor \
#      --scopes /subscriptions/<SUB_ID>/resourceGroups/<RG>/providers/Microsoft.App/containerApps/<APP_NAME>
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
#
# 3. STATIC TOKEN (local dev only — expires in ~1 hour):
#    az account get-access-token --resource https://management.azure.com --query accessToken -o tsv
# AZURE_ACCESS_TOKEN=

AZURE_SUBSCRIPTION_ID=
AZURE_RESOURCE_GROUP=rg-backpro-docextract-dev
AZURE_CONTAINER_APP_NAME=backpro-docextract-dev-processor

# -----------------------------------------------------------------------------
# Build Configuration
# -----------------------------------------------------------------------------

# Build environment
NODE_ENV=development
